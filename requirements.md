# 學生出缺席管理系統需求分析

## 系統概述
建立一個基於Web的學生出缺席管理系統，支援三種用戶角色：學生、老師、管理員。系統提供出缺席記錄、數據分析和圖表生成功能。

## 用戶角色與權限

### 學生 (Student)
- 登入系統
- 查看自己的出缺席記錄
- 填寫老師建立的出缺席表單
- 查看個人出缺席統計圖表

### 老師 (Teacher)
- 登入系統
- 建立出缺席表單
- 查看所有學生的出缺席記錄
- 生成班級出缺席統計圖表
- 管理自己建立的表單

### 管理員 (Admin)
- 登入系統
- 管理用戶帳號（新增、刪除、修改）
- 查看全系統統計數據
- 管理所有表單和記錄

## 核心功能需求

### 1. 用戶認證系統
- 用戶註冊與登入
- 角色權限控制
- 密碼加密存儲
- 會話管理

### 2. 出缺席表單管理
- 老師可建立表單（指定日期、時間、課程）
- 學生可填寫表單（出席/缺席/請假）
- 表單狀態管理（開放/關閉）
- 表單歷史記錄

### 3. 數據查詢與顯示
- 學生個人出缺席記錄
- 老師查看班級出缺席情況
- 管理員查看全系統數據
- 支援日期範圍篩選

### 4. 數據分析與圖表
- 個人出缺席統計圖表
- 班級出缺席趨勢圖
- 課程出席率分析
- 月度/週度統計報表

## 技術架構

### 後端技術
- Flask (Python Web框架)
- SQLite 資料庫
- JWT 認證
- RESTful API設計

### 前端技術
- HTML5 + CSS3 + JavaScript
- Bootstrap (響應式設計)
- Chart.js (圖表生成)
- AJAX (異步數據交互)

### 部署環境
- 支援本地部署
- 可部署至雲端平台

## 資料庫設計概要

### 主要資料表
1. users - 用戶資料表
2. forms - 出缺席表單表
3. attendance_records - 出缺席記錄表
4. courses - 課程資料表

## 系統流程

### 學生使用流程
1. 登入系統
2. 查看可填寫的表單
3. 填寫出缺席狀態
4. 查看個人出缺席記錄和統計

### 老師使用流程
1. 登入系統
2. 建立出缺席表單
3. 查看學生填寫情況
4. 生成班級統計圖表

### 管理員使用流程
1. 登入系統
2. 管理用戶帳號
3. 查看系統整體數據
4. 生成全系統報表

## 安全性考量
- 密碼加密存儲
- SQL注入防護
- XSS攻擊防護
- CSRF保護
- 會話安全管理



## 新增功能需求

### 課程加入系統
- 老師建立課程時自動生成唯一課程代碼
- 學生可以通過課程代碼加入課程
- 學生只能看到已加入課程的出缺席表單
- 老師可以查看課程的學生名單
- 支援學生退出課程功能

### 設計要求
- 現代化響應式設計
- 美觀的用戶介面
- 良好的用戶體驗
- 支援深色/淺色主題切換
- 動畫效果和過渡效果
- 卡片式設計風格
- 清晰的視覺層次

## 更新的資料庫設計

### 新增資料表
- course_enrollments - 學生課程關聯表
  - id (主鍵)
  - student_id (外鍵，關聯用戶表)
  - course_id (外鍵，關聯課程表)
  - enrolled_at (加入時間)
  - is_active (是否啟用)

### 更新的系統流程

#### 學生使用流程（更新）
1. 登入系統
2. 通過課程代碼加入課程
3. 查看已加入課程的可填寫表單
4. 填寫出缺席狀態
5. 查看個人出缺席記錄和統計

#### 老師使用流程（更新）
1. 登入系統
2. 建立課程（自動生成課程代碼）
3. 分享課程代碼給學生
4. 查看課程學生名單
5. 建立出缺席表單
6. 查看學生填寫情況
7. 生成班級統計圖表

